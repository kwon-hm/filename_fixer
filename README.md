# ✨ 깨진 한글 파일명 복원기

자음/모음이 분리되어 깨진 한글 파일명을 자동으로 복원하는 크롬 확장프로그램입니다.

## 🎯 주요 기능

- **자동 복원**: 깨진 한글 파일명을 정상 한글로 자동 복원
- **NFD → NFC 변환**: 분리된 자음/모음을 조합하여 완성된 한글로 변환
- **받침 자동 처리**: 강, 공, 국 등 받침이 있는 한글도 완벽하게 복원
- **드래그 앤 드롭**: 편리한 파일 업로드
- **미리보기**: 복원 전후 파일명 미리보기
- **일괄 처리**: 여러 파일 동시 복원

## 📋 해결하는 문제

맥에서 윈도우로 파일을 전송하거나, 이메일로 받은 파일의 한글 이름이 깨지는 문제를 해결합니다.

### 문제 상황

**예시:**

- 원본: `자기평가서.pdf`
- 깨진 상태: `ㅈㅏㄱㅣㅍㅕㅇㄱㅏㅅㅓ.pdf` ❌
- 복원 후: `자기평가서.pdf` ✅

**실제 예시:**

```
ㅈㅏㄱㅣㅍㅕㅇㄱㅏㅅㅓ_권혁민_2025 복사본.pdf  →  자기평가서_권혁민_2025 복사본.pdf
ㅂㅗㄱㅗㅅㅓ.docx                        →  보고서.docx
ㅊㅚㅈㅗㅇㅂㅗㄴ.pptx                    →  최종본.pptx
ㄱㅏㅇㄴㅏㅁ.txt                        →  강남.txt  (받침도 복원!)
```

## 🚀 설치 방법

1. 크롬 브라우저에서 `chrome://extensions/` 접속
2. 우측 상단의 "개발자 모드" 활성화
3. "압축해제된 확장 프로그램을 로드합니다" 클릭
4. 이 폴더 선택 (`filename_fixer`)
5. 확장프로그램 설치 완료!

## 📖 사용 방법

### 간단 3단계

1. 크롬 우측 상단의 확장프로그램 아이콘 클릭
2. 깨진 파일을 드래그하거나 클릭하여 선택
3. "✨ 파일명 복원하기" 버튼 클릭
4. 다운로드 폴더에서 복원된 파일 확인! ✅

### 자세한 사용법

1. **파일 선택**

   - 드래그 앤 드롭 또는 클릭하여 파일 선택
   - 여러 파일 동시 선택 가능

2. **자동 감지**

   - 깨진 파일: ⚠️ 아이콘 + 복원될 이름 미리보기
   - 정상 파일: ✅ 아이콘 + "이미 정상입니다" 표시

3. **복원 실행**

   - "✨ 파일명 복원하기" 버튼 클릭
   - 복원된 파일이 다운로드 폴더에 자동 저장

4. **결과 확인**
   - 각 파일의 복원 전/후 이름 확인
   - 다운로드 폴더에서 복원된 파일 사용

## 💡 작동 원리

### NFD vs NFC

한글은 두 가지 방식으로 표현할 수 있습니다:

- **NFD (Normalization Form Decomposed)**:

  - 자음과 모음을 분리하여 저장
  - 맥 OS에서 사용
  - 예: "한" = "ㅎ" + "ㅏ" + "ㄴ" (3개의 문자)
  - 윈도우에서 보면: `ㅎㅏㄴ`으로 깨져 보임

- **NFC (Normalization Form Composed)**:
  - 완성된 글자로 저장
  - 윈도우, Linux에서 사용
  - 예: "한" = "한" (1개의 문자)

### 복원 과정

```javascript
// 깨진 파일명 (자음/모음 분리)
const brokenName = "ㅈㅏㄱㅣㅍㅕㅇㄱㅏㅅㅓ.pdf";

// 1단계: 한글 자모 조합 (ㅈㅏ → 자, ㄱㅣ → 기)
let result = composeHangul(brokenName);
// 중간 결과: "자기평가서.pdf"

// 2단계: NFD → NFC 정규화 (혹시 모를 NFD 처리)
result = result.normalize("NFC");
// 최종 결과: "자기평가서.pdf"
```

**받침도 자동으로 처리됩니다:**

```javascript
"ㄱㅏㅇ" → "강"
"ㅎㅏㄴㄱㅜㄱ" → "한국"
"ㅅㅓㅇㄱㅗㅇ" → "성공"
"ㅇㅣㅆㄷㅏ" → "있다"
```

**복합 받침 예시:**

```javascript
"ㅈㅏㄱㅣㅍㅕㅇㄱㅏㅅㅓ" → "자기평가서"
"ㄱㅏㅇㄴㅏㅁㅇㅕㄱ" → "강남역"
```

## 🔧 기술 스택

- **Manifest V3**: 최신 크롬 확장프로그램 규격
- **Vanilla JavaScript**: 순수 자바스크립트로 구현
- **Unicode Normalization**: JavaScript의 `normalize('NFC')` API 활용

## 📁 파일 구조

```
filename_fixer/
├── icon/               # 아이콘 폴더
│   ├── icon16.png      # 16x16 아이콘
│   ├── icon48.png      # 48x48 아이콘
│   └── icon128.png     # 128x128 아이콘
├── manifest.json       # 확장프로그램 설정
├── popup.html          # UI 인터페이스
├── popup.js            # 복원 로직
├── styles.css          # 스타일시트
└── README.md           # 사용 설명서
```

## 📊 사용 시나리오

### 시나리오 1: 이메일 첨부파일

```
1. 맥에서 보낸 메일의 첨부파일을 윈도우에서 다운로드
2. 파일명이 "ㅂㅗㄱㅗㅅㅓ.pdf"로 깨져있음
3. 확장프로그램으로 파일 복원
4. "보고서.pdf"로 정상 복원! ✅
```

### 시나리오 2: USB 파일 전송

```
1. 맥에서 USB에 저장한 파일을 윈도우에서 열기
2. 여러 파일명이 깨져있음
3. 모든 파일을 한 번에 선택하여 복원
4. 전부 정상 파일명으로 복원! ✅
```

### 시나리오 3: 클라우드 동기화

```
1. 맥에서 Dropbox에 업로드한 파일
2. 윈도우에서 다운로드하니 파일명 깨짐
3. 확장프로그램으로 복원
4. 정상 파일명으로 복원! ✅
```

## ⚠️ 주의사항

- 원본 파일은 변경되지 않습니다
- 복원된 파일은 다운로드 폴더에 새로 저장됩니다
- 이미 정상인 파일은 "복원 불필요"로 표시됩니다
- 한글이 아닌 다른 언어는 영향받지 않습니다

## 🎯 지원하는 문자

- ✅ 모든 한글 (초성, 중성, 종성)
- ✅ 받침이 있는 한글 (강, 공, 국 등)
- ✅ 복잡한 받침 (있, 밟, 닭 등)
- ✅ 영문, 숫자, 특수문자 (그대로 유지)

## 📝 아이콘 정보

아이콘은 이미 `icon/` 폴더에 포함되어 있습니다:

- `icon/icon16.png` - 툴바 아이콘 (16x16)
- `icon/icon48.png` - 확장프로그램 관리 페이지 (48x48)
- `icon/icon128.png` - 크롬 웹 스토어 / 설치 화면 (128x128)

커스텀 아이콘을 만들려면 `icon-generator.html`을 브라우저로 열어 각 크기별로 생성할 수 있습니다.

## 🤝 기여

버그 리포트나 기능 제안은 언제나 환영합니다!

## ❓ FAQ

### Q: 왜 파일명이 깨지나요?

**A:** 맥과 윈도우가 한글을 다르게 처리하기 때문입니다.

- 맥: NFD 방식 (자음/모음 분리)
- 윈도우: NFC 방식 (완성된 글자)

### Q: 원본 파일은 어떻게 되나요?

**A:** 원본 파일은 전혀 변경되지 않습니다. 복원된 파일이 새로 다운로드됩니다.

### Q: 다른 언어도 복원되나요?

**A:** 이 프로그램은 한글 전용입니다. 영문, 숫자, 특수문자는 그대로 유지됩니다.

### Q: 받침도 제대로 처리되나요?

**A:** 네! JavaScript의 `normalize('NFC')`는 모든 한글 조합을 자동으로 처리합니다.

```
"ㄱㅏㅇ" → "강"
"ㅎㅏㄴㄱㅜㄱ" → "한국"
"ㅅㅓㅇㄱㅗㅇ" → "성공"
"ㄱㅏㅇㄴㅏㅁ" → "강남"
```

### Q: 복잡한 받침(ㄳ, ㄺ 등)도 복원되나요?

**A:** 네! 모든 받침이 자동으로 처리됩니다.

```
"ㅇㅣㅆ" → "있" (ㅆ 받침)
"ㅂㅏㄹㄱ" → "밟" (ㄼ 받침)
"ㄷㅏㄹㄱ" → "닭" (ㄺ 받침)
```

## 📄 라이선스

MIT License

---

Made with ❤️ for better Korean filename handling
