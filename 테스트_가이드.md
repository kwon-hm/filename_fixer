# 테스트 가이드

## 🧪 깨진 한글 파일명 복원 테스트

### 테스트 파일 생성 방법

#### 방법 1: 맥 터미널에서 NFD 파일 생성

```bash
cd ~/Desktop

# NFD 형식으로 파일 생성 (자음/모음 분리)
touch $'ㅈㅏㄱㅣㅍㅕㅇㄱㅏㅅㅓ.txt'
touch $'ㅂㅗㄱㅗㅅㅓ.pdf'
touch $'ㅎㅚㅇㅣㄹㅗㄱ.xlsx'
touch $'ㄱㅏㅇㄴㅏㅁㅇㅕㄱ.txt'

# 파일 확인
ls -1
```

#### 방법 2: Python으로 NFD 파일 생성

```python
import unicodedata
import os

# 복원 예시 파일명들
filenames = [
    "자기평가서.txt",
    "보고서.pdf",
    "회의록.xlsx",
    "강남역.txt",
    "한국어.docx",
    "성공.pptx"
]

# NFD 형식으로 변환하여 파일 생성
for filename in filenames:
    nfd_name = unicodedata.normalize('NFD', filename)
    # 빈 파일 생성
    with open(os.path.expanduser(f"~/Desktop/{nfd_name}"), 'w') as f:
        f.write("테스트 파일입니다.")
    print(f"생성됨: {nfd_name}")
```

실행:

```bash
cd ~/Desktop
python3 << 'EOF'
import unicodedata
import os

filenames = [
    "자기평가서.txt",
    "보고서.pdf",
    "회의록.xlsx",
    "강남역.txt"
]

for filename in filenames:
    nfd_name = unicodedata.normalize('NFD', filename)
    with open(nfd_name, 'w') as f:
        f.write("테스트")
    print(f"✓ {nfd_name}")
EOF
```

## 📝 테스트 시나리오

### 시나리오 1: 단일 파일 복원

1. **파일 준비**

   - 위 방법으로 `ㅈㅏㄱㅣㅍㅕㅇㄱㅏㅅㅓ.txt` 생성

2. **확장프로그램 실행**

   - 크롬에서 확장프로그램 아이콘 클릭
   - 파일 드래그 또는 선택

3. **미리보기 확인**

   - ⚠️ 아이콘 표시 확인
   - "✨ 복원 → 자기평가서.txt" 표시 확인

4. **복원 실행**

   - "✨ 파일명 복원하기" 클릭
   - 다운로드 폴더 확인

5. **결과 확인**
   - 다운로드 폴더에 `자기평가서.txt` 생성 확인 ✅

### 시나리오 2: 여러 파일 일괄 복원

1. **여러 깨진 파일 준비**

   ```
   ㅂㅗㄱㅗㅅㅓ.pdf
   ㅎㅚㅇㅣㄹㅗㄱ.xlsx
   ㅊㅚㅈㅗㅇㅂㅗㄴ.pptx
   ```

2. **모든 파일 선택**

   - Shift 클릭 또는 드래그로 여러 파일 선택

3. **일괄 복원**

   - 모든 파일의 미리보기 확인
   - 복원 버튼 클릭

4. **결과 확인**
   ```
   보고서.pdf ✅
   회의록.xlsx ✅
   최종본.pptx ✅
   ```

### 시나리오 3: 받침 있는 한글 테스트

받침이 제대로 복원되는지 확인:

```bash
# 받침 테스트 파일들
touch $'ㄱㅏㅇㄴㅏㅁ.txt'     # 강남
touch $'ㅎㅏㄴㄱㅜㄱ.txt'     # 한국
touch $'ㅅㅓㅇㄱㅗㅇ.txt'     # 성공
touch $'ㅇㅣㅆ.txt'           # 있
touch $'ㅂㅏㄹㄱ.txt'         # 밟
```

**예상 결과:**

```
ㄱㅏㅇㄴㅏㅁ.txt  → 강남.txt  ✅
ㅎㅏㄴㄱㅜㄱ.txt  → 한국.txt  ✅
ㅅㅓㅇㄱㅗㅇ.txt  → 성공.txt  ✅
ㅇㅣㅆ.txt        → 있.txt    ✅
ㅂㅏㄹㄱ.txt      → 밟.txt    ✅
```

## 🔍 깨진 파일명 확인 방법

### 맥 터미널에서 확인

```bash
# NFD/NFC 확인
ls -1 | python3 -c "
import sys
import unicodedata
for line in sys.stdin:
    name = line.strip()
    print(f'{name:20} - NFD 길이: {len(unicodedata.normalize(\"NFD\", name))} / NFC 길이: {len(unicodedata.normalize(\"NFC\", name))}')
"
```

### 파일명이 깨졌는지 판단

- **NFD (깨진 상태)**: 자음/모음이 분리되어 길이가 김
- **NFC (정상 상태)**: 완성된 글자로 길이가 짧음

예시:

```
"한글" (NFC): 2글자
"ㅎㅏㄴㄱㅡㄹ" (NFD): 6글자
```

## 📊 테스트 체크리스트

- [ ] 단순 한글 복원 (자기평가서)
- [ ] 받침 있는 한글 (강남, 한국)
- [ ] 복잡한 받침 (있, 밟, 닭)
- [ ] 여러 파일 동시 복원
- [ ] 영문/숫자 포함 파일명
- [ ] 이미 정상인 파일 (스킵 확인)

## 💡 문제 해결

### 파일이 생성되지 않는 경우

**원인**: 맥 파일시스템이 자동으로 NFD로 변환
**해결**: 테스트 파일 생성 명령어를 정확히 실행

### 복원이 되지 않는 경우

**원인**: 브라우저 다운로드 권한 문제
**해결**: 크롬 설정 → 다운로드 권한 확인

### 한글이 깨져 보이는 경우

**원인**: 에디터/터미널의 인코딩 문제
**해결**: UTF-8 인코딩 확인

## 🎯 성공 기준

1. ✅ 모든 자음/모음이 정확한 한글로 조합됨
2. ✅ 받침이 정확하게 처리됨
3. ✅ 원본 파일은 그대로 유지됨
4. ✅ 다운로드 폴더에 복원된 파일 생성됨
5. ✅ 복원된 파일을 다시 열 수 있음

## 📝 추가 테스트 케이스

### 복잡한 파일명

```bash
# 긴 파일명
touch $'ㅈㅏㄱㅣㅍㅕㅇㄱㅏㅅㅓ_2024_ㅊㅚㅈㅗㅇ.pdf'

# 공백 포함
touch $'ㅂㅗㄱㅗㅅㅓ 1.docx'

# 특수문자 포함
touch $'ㅎㅗㅣㅇㅣㄹㅗㄱ(ㅊㅚㅈㅗㅇ).xlsx'
```

**예상 결과:**

```
자기평가서_2024_최종.pdf ✅
보고서 1.docx ✅
회의록(최종).xlsx ✅
```

---

**테스트를 완료하면 실제 사용 준비 완료! 🎉**
